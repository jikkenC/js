<html>
<head>
<meta charset-"utf-8"/>

<canvas id="pacman" width="600" height="400">
</canvas>

	
<script type="text/javascript">

//パックマンを描画するための変数及びその座標
var cv = document.getElementById("pacman");
var ctx = cv.getContext("2d");
x_zahyo = 100;
y_zahyo = 100;

var cv2 = document.getElementById("something");
var ctx2 = cv.getContext("2d");

	function start() {
	timerID = setInterval ('reDraw()', 5);
	//キー操作イベントの設定
	window.addEventListener ('keydown' , keydownfunc , true);
	}
	
	//再描画のメソッド
	function reDraw(){
		ctx.clearRect (0 , 0 , 600 ,400 );
		drawPacman(ctx,x_zahyo,y_zahyo);
		drawSomething(ctx2,200,200);
	}
	
	//パックマンの形状を表すメソッド
	function drawPacman(ctx,cx,cy){
		ctx.clearRect (0 , 0 , 600 ,400 );
		ctx.strokeStyle="#FF0000";
		ctx.fillStyle="#FF0000";
		ctx.beginPath();
		ctx.arc(cx,cy,50,30 * Math.PI / 180,330 * Math.PI / 180);
		ctx.lineTo(cx,cy);
		ctx.lineTo(cx + 50 * Math.cos(30 * Math.PI/ 180),
		 		   cy + 50 * Math.sin(30 * Math.PI/ 180));
		ctx.fill();
		}
		
	//食べ物の画像なりを入れる所
	function drawSomething(ctx,cx,cy){
		ctx.fillRect(cx, cy, 20, 20);
		}
	
	function keydownfunc (event) {
	//どのキーが押されたかの情報を取得する
	var code = event.keyCode;
	//スイッチ文でケースにより処理を変える
	switch (code) {
		case 37://←キーが押された場合の番号
			x_zahyo -= 10;//x座標を5px減らす（左に動かす）
			break;//ここでブレークしないと下のコードが実行されてしまう
		case 39://→キーが押された場合の番号
			x_zahyo += 10;//x座標を5px増やす（右に動かす）
			break;
		case 38://↑キーが押された場合の番号
			y_zahyo -= 10;//y座標を5px減らす（上に動かす）
			break;
		case 40://↓キーが押された場合の番号
			y_zahyo += 10;//y座標を5px増やす（下に動かす）
			break;
		}
	}
	
	//あたり判定のメソッド
	function collisionDetection(mx,my,ax,ay){
	}
	
</script>
</head>
<body onload="start()">
	
</body>
</html>
